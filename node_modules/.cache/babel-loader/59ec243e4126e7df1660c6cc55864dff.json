{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js!/Users/guohechuan/code/aurora/node_modules/eslint-loader/index.js??ref--13-0!/Users/guohechuan/code/aurora/src/utils/services.js","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/utils/services.js","mtime":1626163653610},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9ndW9oZWNodWFuL2NvZGUvYXVyb3JhL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IEFWIGZyb20gJ2xlYW5jbG91ZC1zdG9yYWdlJzsKaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnOwppbXBvcnQgZG9jdW1lbnRzIGZyb20gJy4vZG9jdW1lbnRzJzsKdmFyIEdSQVBIUUxfVVJMID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vZ3JhcGhxbCc7CnZhciBHSVRIVUJfQVBJID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MnOwp2YXIgdXNlcm5hbWUgPSBjb25maWcudXNlcm5hbWUsCiAgICByZXBvc2l0b3J5ID0gY29uZmlnLnJlcG9zaXRvcnksCiAgICB0b2tlbiA9IGNvbmZpZy50b2tlbjsKdmFyIGJsb2cgPSAiIi5jb25jYXQoR0lUSFVCX0FQSSwgIi8iKS5jb25jYXQodXNlcm5hbWUsICIvIikuY29uY2F0KHJlcG9zaXRvcnkpOwp2YXIgYWNjZXNzX3Rva2VuID0gInRva2VuICIuY29uY2F0KHRva2VuLmpvaW4oJycpKTsKdmFyIGlzRGV2ID0gL14oMTkyXC4xNjh8bG9jYWxob3N0KS8udGVzdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7IC8vIOeKtuaAgeajgOa1iwoKdmFyIGNoZWNrU3RhdHVzID0gZnVuY3Rpb24gY2hlY2tTdGF0dXMocmVzcG9uc2UpIHsKICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHJldHVybiByZXNwb25zZTsKICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCk7CiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTsKICB0aHJvdyBlcnJvcjsKfTsgLy8gZ2l0aHViIGZldGNoCgoKdmFyIGdpdGh1YkZldGNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1cmwpIHsKICAgIHZhciBpc1F1ZXJ5UGFnZSwKICAgICAgICByZXNwb25zZSwKICAgICAgICBkYXRhLAogICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpc1F1ZXJ5UGFnZSA9IF9hcmdzLmxlbmd0aCA+IDEgJiYgX2FyZ3NbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzFdIDogZmFsc2U7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIGZldGNoKHVybCwgewogICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYWNjZXNzX3Rva2VuCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgY2hlY2tTdGF0dXMocmVzcG9uc2UpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBpc1F1ZXJ5UGFnZSA/IGRhdGFbMF0gOiBkYXRhKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTJdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gZ2l0aHViRmV0Y2goX3gpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyDmnoTlu7ogR3JhcGhRTAoKCnZhciBjcmVhdGVDYWxsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGRvY3VtZW50KSB7CiAgICB2YXIgcGF5bG9hZCwgcmVzcG9uc2UsIGJvZHk7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgIHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBmZXRjaChHUkFQSFFMX1VSTCwgewogICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGFjY2Vzc190b2tlbgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYm9keTogcGF5bG9hZAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIGNoZWNrU3RhdHVzKHJlc3BvbnNlKTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgYm9keSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgYm9keS5kYXRhKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0Mi50MCk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMCwgMTJdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ2FsbChfeDIpIHsKICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsgLy8g6I635Y+W5paH56ug5pWw6YePCgoKZXhwb3J0IHZhciBxdWVyeUFyY2hpdmVzQ291bnQgPSBmdW5jdGlvbiBxdWVyeUFyY2hpdmVzQ291bnQoKSB7CiAgcmV0dXJuIGNyZWF0ZUNhbGwoZG9jdW1lbnRzLnF1ZXJ5QXJjaGl2ZXNDb3VudCh7CiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICByZXBvc2l0b3J5OiByZXBvc2l0b3J5CiAgfSkpOwp9OyAvLyDojrflj5bngbXmhJ/mlbDph48KCmV4cG9ydCB2YXIgcXVlcnlJbnNwaXJhdGlvbkNvdW50ID0gZnVuY3Rpb24gcXVlcnlJbnNwaXJhdGlvbkNvdW50KCkgewogIHJldHVybiBjcmVhdGVDYWxsKGRvY3VtZW50cy5xdWVyeUluc3BpcmF0aW9uQ291bnQoewogICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgcmVwb3NpdG9yeTogcmVwb3NpdG9yeQogIH0pKTsKfTsgLy8g5oyJ5YiG57G7ICYg5qCH562+562b6YCJ5paH56ugCgpleHBvcnQgdmFyIHF1ZXJ5RmlsdGVyQXJjaGl2ZXNDb3VudCA9IGZ1bmN0aW9uIHF1ZXJ5RmlsdGVyQXJjaGl2ZXNDb3VudChfcmVmMykgewogIHZhciBsYWJlbCA9IF9yZWYzLmxhYmVsLAogICAgICBtaWxlc3RvbmUgPSBfcmVmMy5taWxlc3RvbmU7CiAgcmV0dXJuIGNyZWF0ZUNhbGwoZG9jdW1lbnRzLnF1ZXJ5RmlsdGVyQXJjaGl2ZXNDb3VudCh7CiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICByZXBvc2l0b3J5OiByZXBvc2l0b3J5LAogICAgbGFiZWw6IGxhYmVsLAogICAgbWlsZXN0b25lOiBtaWxlc3RvbmUKICB9KSk7Cn07IC8vIOiOt+WPluaWh+eroOWIl+ihqAoKZXhwb3J0IHZhciBxdWVyeVBvc3RzID0gZnVuY3Rpb24gcXVlcnlQb3N0cyhfcmVmNCkgewogIHZhciBfcmVmNCRwYWdlID0gX3JlZjQucGFnZSwKICAgICAgcGFnZSA9IF9yZWY0JHBhZ2UgPT09IHZvaWQgMCA/IDEgOiBfcmVmNCRwYWdlLAogICAgICBfcmVmNCRwYWdlU2l6ZSA9IF9yZWY0LnBhZ2VTaXplLAogICAgICBwYWdlU2l6ZSA9IF9yZWY0JHBhZ2VTaXplID09PSB2b2lkIDAgPyAxMCA6IF9yZWY0JHBhZ2VTaXplLAogICAgICBfcmVmNCRmaWx0ZXIgPSBfcmVmNC5maWx0ZXIsCiAgICAgIGZpbHRlciA9IF9yZWY0JGZpbHRlciA9PT0gdm9pZCAwID8gJycgOiBfcmVmNCRmaWx0ZXI7CiAgdmFyIHVybCA9ICIiLmNvbmNhdChibG9nLCAiL2lzc3Vlcz9zdGF0ZT1vcGVuJnBhZ2U9IikuY29uY2F0KHBhZ2UsICImcGVyX3BhZ2U9IikuY29uY2F0KHBhZ2VTaXplKS5jb25jYXQoZmlsdGVyKTsKICByZXR1cm4gZ2l0aHViRmV0Y2godXJsKTsKfTsgLy8g6I635Y+W5Y2V56+H5paH56ugCgpleHBvcnQgdmFyIHF1ZXJ5UG9zdCA9IGZ1bmN0aW9uIHF1ZXJ5UG9zdChudW1iZXIpIHsKICB2YXIgdXJsID0gIiIuY29uY2F0KGJsb2csICIvaXNzdWVzLyIpLmNvbmNhdChudW1iZXIsICI/c3RhdGU9b3BlbiIpOwogIHJldHVybiBnaXRodWJGZXRjaCh1cmwpOwp9OyAvLyDojrflj5bliIbnsbsKCmV4cG9ydCB2YXIgcXVlcnlDYXRlZ29yeSA9IGZ1bmN0aW9uIHF1ZXJ5Q2F0ZWdvcnkoKSB7CiAgdmFyIHVybCA9ICIiLmNvbmNhdChibG9nLCAiL21pbGVzdG9uZXMiKTsKICByZXR1cm4gZ2l0aHViRmV0Y2godXJsKTsKfTsgLy8g6I635Y+W5qCH562+CgpleHBvcnQgdmFyIHF1ZXJ5VGFnID0gZnVuY3Rpb24gcXVlcnlUYWcoKSB7CiAgdmFyIHVybCA9ICIiLmNvbmNhdChibG9nLCAiL2xhYmVscz9wYWdlPTEmcGVyX3BhZ2U9MTAwIik7CiAgcmV0dXJuIGdpdGh1YkZldGNoKHVybCk7Cn07IC8vIOiOt+WPlueBteaEnwoKZXhwb3J0IHZhciBxdWVyeUluc3BpcmF0aW9uID0gZnVuY3Rpb24gcXVlcnlJbnNwaXJhdGlvbihfcmVmNSkgewogIHZhciBfcmVmNSRwYWdlID0gX3JlZjUucGFnZSwKICAgICAgcGFnZSA9IF9yZWY1JHBhZ2UgPT09IHZvaWQgMCA/IDEgOiBfcmVmNSRwYWdlLAogICAgICBfcmVmNSRwYWdlU2l6ZSA9IF9yZWY1LnBhZ2VTaXplLAogICAgICBwYWdlU2l6ZSA9IF9yZWY1JHBhZ2VTaXplID09PSB2b2lkIDAgPyAxMCA6IF9yZWY1JHBhZ2VTaXplOwogIHZhciB1cmwgPSAiIi5jb25jYXQoYmxvZywgIi9pc3N1ZXM/c3RhdGU9Y2xvc2VkJmxhYmVscz1pbnNwaXJhdGlvbiZwYWdlPSIpLmNvbmNhdChwYWdlLCAiJnBlcl9wYWdlPSIpLmNvbmNhdChwYWdlU2l6ZSk7CiAgcmV0dXJuIGdpdGh1YkZldGNoKHVybCk7Cn07IC8vIOiOt+WPluS5puWNlSAmIOWPi+mTviAmIOWFs+S6jgoKZXhwb3J0IHZhciBxdWVyeVBhZ2UgPSBmdW5jdGlvbiBxdWVyeVBhZ2UodHlwZSkgewogIHZhciB1cHBlclR5cGUgPSB0eXBlLnJlcGxhY2UoL15cUy8sIGZ1bmN0aW9uIChzKSB7CiAgICByZXR1cm4gcy50b1VwcGVyQ2FzZSgpOwogIH0pOwogIHZhciB1cmwgPSAiIi5jb25jYXQoYmxvZywgIi9pc3N1ZXM/c3RhdGU9Y2xvc2VkJmxhYmVscz0iKS5jb25jYXQodXBwZXJUeXBlKTsKICByZXR1cm4gZ2l0aHViRmV0Y2godXJsLCB0cnVlKTsKfTsgLy8g5paH56ug54Ot5bqmCgpleHBvcnQgdmFyIHF1ZXJ5SG90ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGlkcykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgaWYgKGlzRGV2KSByZXR1cm4gcmVzb2x2ZShbXSk7CiAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IEFWLlF1ZXJ5KCdDb3VudGVyJyk7CiAgICAgICAgICAgICAgcXVlcnkuY29udGFpbmVkSW4oJ2lkJywgaWRzKTsKICAgICAgICAgICAgICBxdWVyeS5maW5kKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICB2YXIgaG90ID0ge307CiAgICAgICAgICAgICAgICByZXMuZm9yRWFjaChmdW5jdGlvbiAobykgewogICAgICAgICAgICAgICAgICByZXR1cm4gaG90W28uYXR0cmlidXRlcy5pZF0gPSBvLmF0dHJpYnV0ZXMudGltZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmVzb2x2ZShob3QpOwogICAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gcXVlcnlIb3QoX3gzKSB7CiAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7IC8vIOWinuWKoOeDreW6pgoKZXhwb3J0IHZhciBpbmNyZWFzZUhvdCA9IGZ1bmN0aW9uIGluY3JlYXNlSG90KHBvc3QpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIGlmIChpc0RldikgcmV0dXJuIHJlc29sdmUoMSk7CiAgICB2YXIgcXVlcnkgPSBuZXcgQVYuUXVlcnkoJ0NvdW50ZXInKTsKICAgIHZhciBDb3VudGVyID0gQVYuT2JqZWN0LmV4dGVuZCgnQ291bnRlcicpOwogICAgdmFyIHRpdGxlID0gcG9zdC50aXRsZSwKICAgICAgICBpZCA9IHBvc3QuaWQ7CiAgICBxdWVyeS5lcXVhbFRvKCdpZCcsIGlkKTsKICAgIHF1ZXJ5LmZpbmQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8g5bey5a2Y5Zyo5YiZ6L+U5Zue54Ot5bqmCiAgICAgICAgdmFyIGNvdW50ZXIgPSByZXNbMF07CiAgICAgICAgY291bnRlci5pbmNyZW1lbnQoJ3RpbWUnLCAxKS5zYXZlKG51bGwsIHsKICAgICAgICAgIGZldGNoV2hlblNhdmU6IHRydWUKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb3VudGVyKSB7CiAgICAgICAgICB2YXIgdGltZSA9IGNvdW50ZXIuZ2V0KCd0aW1lJyk7CiAgICAgICAgICByZXNvbHZlKHRpbWUpOwogICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOS4jeWtmOWcqOWImeaWsOW7ugogICAgICAgIHZhciBuZXdjb3VudGVyID0gbmV3IENvdW50ZXIoKTsKICAgICAgICBuZXdjb3VudGVyLnNldCgndGl0bGUnLCB0aXRsZSk7CiAgICAgICAgbmV3Y291bnRlci5zZXQoJ2lkJywgaWQpOwogICAgICAgIG5ld2NvdW50ZXIuc2V0KCd0aW1lJywgMSk7CiAgICAgICAgbmV3Y291bnRlci5zZXQoJ3NpdGUnLCBsb2NhdGlvbi5ocmVmKTsKICAgICAgICBuZXdjb3VudGVyLnNhdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlKDEpOwogICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgICB9CiAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKfTsgLy8gTnlhfn4KCmV4cG9ydCB2YXIgcXVlcnlMaWtlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjcgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHR5cGUpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgIGlmIChpc0RldikgcmV0dXJuIHJlc29sdmUoMCk7CiAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gbmV3IEFWLlF1ZXJ5KCdDb3VudGVyJyk7CiAgICAgICAgICAgICAgdmFyIENvdW50ZXIgPSBBVi5PYmplY3QuZXh0ZW5kKCdDb3VudGVyJyk7CiAgICAgICAgICAgICAgcXVlcnkuZXF1YWxUbygndGl0bGUnLCAnc2l0ZScpOwogICAgICAgICAgICAgIHF1ZXJ5LmZpcnN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnZ2V0VGltZXMnKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMuZ2V0KCd0aW1lJykpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlcy5pbmNyZW1lbnQoJ3RpbWUnLCAxKS5zYXZlKG51bGwsIHsKICAgICAgICAgICAgICAgICAgICAgIGZldGNoV2hlblNhdmU6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShjb3VudGVyLmdldCgndGltZScpKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIG5ld2NvdW50ZXIgPSBuZXcgQ291bnRlcigpOwogICAgICAgICAgICAgICAgICBuZXdjb3VudGVyLnNldCgndGl0bGUnLCAnc2l0ZScpOwogICAgICAgICAgICAgICAgICBuZXdjb3VudGVyLnNldCgndGltZScsIDEpOwogICAgICAgICAgICAgICAgICBuZXdjb3VudGVyLnNldCgnc2l0ZScsIGxvY2F0aW9uLmhyZWYpOwogICAgICAgICAgICAgICAgICBuZXdjb3VudGVyLnNhdmUoKS50aGVuKGZ1bmN0aW9uIChjb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoY291bnRlci5nZXQoJ3RpbWUnKSk7CiAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNCk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gcXVlcnlMaWtlKF94NCkgewogICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOyAvLyDorr/pl67mnaXmupAKCmV4cG9ydCB2YXIgdmlzaXRvclN0YXRpc3RpY3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmOCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVmZXJyZXIpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgIGlmIChpc0RldikgcmV0dXJuIHJlc29sdmUoKTsKICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgQVYuUXVlcnkoJ1Zpc2l0b3InKTsKICAgICAgICAgICAgICB2YXIgVmlzaXRvciA9IEFWLk9iamVjdC5leHRlbmQoJ1Zpc2l0b3InKTsKICAgICAgICAgICAgICBxdWVyeS5lcXVhbFRvKCdyZWZlcnJlcicsIHJlZmVycmVyKTsKICAgICAgICAgICAgICBxdWVyeS5maXJzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgICAgICAgICByZXMuaW5jcmVtZW50KCd0aW1lJywgMSkuc2F2ZShudWxsLCB7CiAgICAgICAgICAgICAgICAgICAgZmV0Y2hXaGVuU2F2ZTogdHJ1ZQogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHZhciBuZXdWaXNpdG9yID0gbmV3IFZpc2l0b3IoKTsKICAgICAgICAgICAgICAgICAgbmV3VmlzaXRvci5zZXQoJ3JlZmVycmVyJywgcmVmZXJyZXIpOwogICAgICAgICAgICAgICAgICBuZXdWaXNpdG9yLnNldCgndGltZScsIDEpOwogICAgICAgICAgICAgICAgICBuZXdWaXNpdG9yLnNhdmUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChjb25zb2xlLmVycm9yKTsKICAgICAgICAgICAgfSkuY2F0Y2goY29uc29sZS5lcnJvcikpOwoKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHZpc2l0b3JTdGF0aXN0aWNzKF94NSkgewogICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOw=="},{"version":3,"sources":["/Users/guohechuan/code/aurora/src/utils/services.js"],"names":["AV","config","documents","GRAPHQL_URL","GITHUB_API","username","repository","token","blog","access_token","join","isDev","test","window","location","host","checkStatus","response","status","error","Error","statusText","githubFetch","url","isQueryPage","fetch","method","headers","Authorization","json","data","console","log","createCall","document","payload","JSON","stringify","query","body","queryArchivesCount","queryInspirationCount","queryFilterArchivesCount","label","milestone","queryPosts","page","pageSize","filter","queryPost","number","queryCategory","queryTag","queryInspiration","queryPage","type","upperType","replace","s","toUpperCase","queryHot","ids","Promise","resolve","Query","containedIn","find","then","res","hot","forEach","o","attributes","id","time","catch","increaseHot","post","Counter","Object","extend","title","equalTo","length","counter","increment","save","fetchWhenSave","get","newcounter","set","href","queryLike","first","visitorStatistics","referrer","Visitor","newVisitor"],"mappings":"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","sourcesContent":["import AV from 'leancloud-storage'\nimport config from '../config'\nimport documents from './documents'\n\nconst GRAPHQL_URL = 'https://api.github.com/graphql'\nconst GITHUB_API = 'https://api.github.com/repos'\n\nconst { username, repository, token } = config\nconst blog = `${GITHUB_API}/${username}/${repository}`\nconst access_token = `token ${token.join('')}`\nconst isDev = /^(192\\.168|localhost)/.test(window.location.host)\n\n// 状态检测\nconst checkStatus = (response) => {\n  if (response.status >= 200 && response.status < 300) return response\n  const error = new Error(response.statusText)\n  error.response = response\n  throw error\n}\n\n// github fetch\nconst githubFetch = async (url, isQueryPage = false) => {\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        Authorization: access_token,\n      },\n    })\n    checkStatus(response)\n    const data = await response.json()\n    return isQueryPage ? data[0] : data\n  } catch (error) {\n    console.log(error)\n  }\n}\n\n// 构建 GraphQL\nconst createCall = async (document) => {\n  try {\n    const payload = JSON.stringify({ query: document })\n    const response = await fetch(GRAPHQL_URL, {\n      method: 'POST',\n      headers: {\n        Authorization: access_token,\n      },\n      body: payload,\n    })\n    checkStatus(response)\n    const body = await response.json()\n    return body.data\n  } catch (err) {\n    console.log(err)\n  }\n}\n\n// 获取文章数量\nexport const queryArchivesCount = () => createCall(documents.queryArchivesCount({ username, repository }))\n\n// 获取灵感数量\nexport const queryInspirationCount = () => createCall(documents.queryInspirationCount({ username, repository }))\n\n// 按分类 & 标签筛选文章\nexport const queryFilterArchivesCount = ({ label, milestone }) =>\n  createCall(documents.queryFilterArchivesCount({ username, repository, label, milestone }))\n\n// 获取文章列表\nexport const queryPosts = ({ page = 1, pageSize = 10, filter = '' }) => {\n  const url = `${blog}/issues?state=open&page=${page}&per_page=${pageSize}${filter}`\n  return githubFetch(url)\n}\n\n// 获取单篇文章\nexport const queryPost = (number) => {\n  const url = `${blog}/issues/${number}?state=open`\n  return githubFetch(url)\n}\n\n// 获取分类\nexport const queryCategory = () => {\n  const url = `${blog}/milestones`\n  return githubFetch(url)\n}\n\n// 获取标签\nexport const queryTag = () => {\n  const url = `${blog}/labels?page=1&per_page=100`\n  return githubFetch(url)\n}\n\n// 获取灵感\nexport const queryInspiration = ({ page = 1, pageSize = 10 }) => {\n  const url = `${blog}/issues?state=closed&labels=inspiration&page=${page}&per_page=${pageSize}`\n  return githubFetch(url)\n}\n\n// 获取书单 & 友链 & 关于\nexport const queryPage = (type) => {\n  const upperType = type.replace(/^\\S/, (s) => s.toUpperCase())\n  const url = `${blog}/issues?state=closed&labels=${upperType}`\n  return githubFetch(url, true)\n}\n\n// 文章热度\nexport const queryHot = async (ids) => {\n  return new Promise((resolve) => {\n    if (isDev) return resolve([])\n    const query = new AV.Query('Counter')\n    query.containedIn('id', ids)\n    query\n      .find()\n      .then((res) => {\n        const hot = {}\n        res.forEach((o) => (hot[o.attributes.id] = o.attributes.time))\n        resolve(hot)\n      })\n      .catch(console.error)\n  }).catch(console.error)\n}\n\n// 增加热度\nexport const increaseHot = (post) => {\n  return new Promise((resolve) => {\n    if (isDev) return resolve(1)\n    const query = new AV.Query('Counter')\n    const Counter = AV.Object.extend('Counter')\n    const { title, id } = post\n    query.equalTo('id', id)\n    query\n      .find()\n      .then((res) => {\n        if (res.length > 0) {\n          // 已存在则返回热度\n          const counter = res[0]\n          counter\n            .increment('time', 1)\n            .save(null, { fetchWhenSave: true })\n            .then((counter) => {\n              const time = counter.get('time')\n              resolve(time)\n            })\n            .catch(console.error)\n        } else {\n          // 不存在则新建\n          const newcounter = new Counter()\n          newcounter.set('title', title)\n          newcounter.set('id', id)\n          newcounter.set('time', 1)\n          newcounter.set('site', location.href)\n          newcounter\n            .save()\n            .then(() => resolve(1))\n            .catch(console.error)\n        }\n      })\n      .catch(console.error)\n  }).catch(console.error)\n}\n\n// Nya~~\nexport const queryLike = async (type) => {\n  return new Promise((resolve) => {\n    if (isDev) return resolve(0)\n    const query = new AV.Query('Counter')\n    const Counter = AV.Object.extend('Counter')\n    query.equalTo('title', 'site')\n    query\n      .first()\n      .then((res) => {\n        if (res) {\n          if (type === 'getTimes') {\n            resolve(res.get('time'))\n          } else {\n            res\n              .increment('time', 1)\n              .save(null, { fetchWhenSave: true })\n              .then((counter) => resolve(counter.get('time')))\n              .catch(console.error)\n          }\n        } else {\n          const newcounter = new Counter()\n          newcounter.set('title', 'site')\n          newcounter.set('time', 1)\n          newcounter.set('site', location.href)\n          newcounter\n            .save()\n            .then((counter) => resolve(counter.get('time')))\n            .catch(console.error)\n        }\n      })\n      .catch(console.error)\n  }).catch(console.error)\n}\n\n// 访问来源\nexport const visitorStatistics = async (referrer) => {\n  return new Promise((resolve) => {\n    if (isDev) return resolve()\n    const query = new AV.Query('Visitor')\n    const Visitor = AV.Object.extend('Visitor')\n    query.equalTo('referrer', referrer)\n    query\n      .first()\n      .then((res) => {\n        if (res) {\n          res\n            .increment('time', 1)\n            .save(null, { fetchWhenSave: true })\n            .then(() => resolve())\n            .catch(console.error)\n        } else {\n          const newVisitor = new Visitor()\n          newVisitor.set('referrer', referrer)\n          newVisitor.set('time', 1)\n          newVisitor\n            .save()\n            .then(() => resolve())\n            .catch(console.error)\n        }\n      })\n      .catch(console.error)\n  }).catch(console.error)\n}\n"]}]}