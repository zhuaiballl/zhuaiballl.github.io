{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js!/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/views/Inspiration/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/views/Inspiration/index.vue","mtime":1626163653612},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2d1b2hlY2h1YW4vY29kZS9hdXJvcmEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgTWFya0Rvd24gZnJvbSAnQC9jb21wb25lbnRzL01hcmtEb3duJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvUGFnaW5hdGlvbic7CmltcG9ydCBRdW90ZSBmcm9tICdAL2NvbXBvbmVudHMvUXVvdGUnOwppbXBvcnQgU2VnbWVudCBmcm9tICdAL2NvbXBvbmVudHMvU2VnbWVudCc7CmltcG9ydCBDb21tZW50IGZyb20gJ0AvY29tcG9uZW50cy9Db21tZW50JzsKaW1wb3J0IHsgc2h1ZmZsZSB9IGZyb20gJ0AvdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0luc3BpcmF0aW9uJywKICBjb21wb25lbnRzOiB7CiAgICBNYXJrRG93bjogTWFya0Rvd24sCiAgICBMb2FkaW5nOiBMb2FkaW5nLAogICAgUGFnaW5hdGlvbjogUGFnaW5hdGlvbiwKICAgIFF1b3RlOiBRdW90ZSwKICAgIFNlZ21lbnQ6IFNlZ21lbnQsCiAgICBDb21tZW50OiBDb21tZW50CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGluaXRDb21tZW50OiBmYWxzZSwKICAgICAgY29sb3JzOiBzaHVmZmxlKHRoaXMuJGNvbmZpZy50aGVtZUNvbG9ycyksCiAgICAgIHRvdGFsQ291bnQ6IDAsCiAgICAgIHBhZ2U6IDAsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgaW5zcGlyYXRpb246IFtdLAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtYXhQYWdlOiBmdW5jdGlvbiBtYXhQYWdlKCkgewogICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMudG90YWxDb3VudCAvIHRoaXMucGFnZVNpemUpOwogICAgfSwKICAgIGlzRGlzYWJsZWRQcmV2OiBmdW5jdGlvbiBpc0Rpc2FibGVkUHJldigpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnZSA8PSAxOwogICAgfSwKICAgIGlzRGlzYWJsZWROZXh0OiBmdW5jdGlvbiBpc0Rpc2FibGVkTmV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnZSA+PSB0aGlzLm1heFBhZ2U7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnlJbnNwaXJhdGlvbkNvdW50Jyk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXMudG90YWxDb3VudCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnF1ZXJ5SW5zcGlyYXRpb24oKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfdGhpcy5pbml0Q29tbWVudCA9IHRydWU7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBxdWVyeUluc3BpcmF0aW9uOiBmdW5jdGlvbiBxdWVyeUluc3BpcmF0aW9uKCkgewogICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cywKICAgICAgICAgIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdHlwZSwgcXVlcnlQYWdlLCBpbnNwaXJhdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdHlwZSA9IF9hcmd1bWVudHMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzBdIDogJ25leHQnOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmxvYWRpbmcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHF1ZXJ5UGFnZSA9IHR5cGUgPT09ICdwcmV2JyA/IF90aGlzMi5wYWdlIC0gMSA6IF90aGlzMi5wYWdlICsgMTsKICAgICAgICAgICAgICAgIF90aGlzMi5wYWdlID0gcXVlcnlQYWdlOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmxpc3RbcXVlcnlQYWdlXSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi5zY3JvbGxUb3AoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuaW5zcGlyYXRpb24gPSBfdGhpczIubGlzdFtxdWVyeVBhZ2VdOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfdGhpczIubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5SW5zcGlyYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IHF1ZXJ5UGFnZSwKICAgICAgICAgICAgICAgICAgcGFnZVNpemU6IF90aGlzMi5wYWdlU2l6ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpbnNwaXJhdGlvbiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczIuc2Nyb2xsVG9wKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmluc3BpcmF0aW9uID0gaW5zcGlyYXRpb247CiAgICAgICAgICAgICAgICAgIF90aGlzMi5saXN0W3F1ZXJ5UGFnZV0gPSBpbnNwaXJhdGlvbjsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2Nyb2xsVG9wOiBmdW5jdGlvbiBzY3JvbGxUb3AoY2IpIHsKICAgICAgd2luZG93LnNjcm9sbFRvKHsKICAgICAgICB0b3A6IDAsCiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnCiAgICAgIH0pOwogICAgICB2YXIgZGVsYXlUaW1lID0gdGhpcy4kY29uZmlnLmlzTW9iaWxlID8gODAwIDogNjAwOwogICAgICBzZXRUaW1lb3V0KGNiLCBkZWxheVRpbWUpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,QAAA,MAAA,uBAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,KAAA,MAAA,oBAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,SAAA,OAAA,QAAA,SAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,UAAA,EAAA,UAHA;AAIA,IAAA,KAAA,EAAA,KAJA;AAKA,IAAA,OAAA,EAAA,OALA;AAMA,IAAA,OAAA,EAAA;AANA,GAFA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,MAAA,EAAA,OAAA,CAAA,KAAA,OAAA,CAAA,WAAA,CAHA;AAIA,MAAA,UAAA,EAAA,CAJA;AAKA,MAAA,IAAA,EAAA,CALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,WAAA,EAAA,EAPA;AAQA,MAAA,IAAA,EAAA;AARA,KAAA;AAUA,GArBA;AAsBA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,IAAA,CAAA,IAAA,CAAA,KAAA,UAAA,GAAA,KAAA,QAAA,CAAA;AACA,KAHA;AAIA,IAAA,cAJA,4BAIA;AACA,aAAA,KAAA,IAAA,IAAA,CAAA;AACA,KANA;AAOA,IAAA,cAPA,4BAOA;AACA,aAAA,KAAA,IAAA,IAAA,KAAA,OAAA;AACA;AATA,GAtBA;AAiCA,EAAA,OAjCA,qBAiCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,uBAAA,CADA;;AAAA;AACA,cAAA,KAAA,CAAA,UADA;AAAA;AAAA,qBAEA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAGA,cAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,GArCA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAA,IAAA,0EAAA,MAAA;;AAAA,qBACA,MAAA,CAAA,OADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAEA,gBAAA,SAFA,GAEA,IAAA,KAAA,MAAA,GAAA,MAAA,CAAA,IAAA,GAAA,CAAA,GAAA,MAAA,CAAA,IAAA,GAAA,CAFA;AAGA,gBAAA,MAAA,CAAA,IAAA,GAAA,SAAA;;AAHA,qBAKA,MAAA,CAAA,IAAA,CAAA,SAAA,CALA;AAAA;AAAA;AAAA;;AAMA,gBAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AACA,kBAAA,MAAA,CAAA,WAAA,GAAA,MAAA,CAAA,IAAA,CAAA,SAAA,CAAA;AACA,iBAFA;;AANA;;AAAA;AAYA,gBAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AAZA;AAAA,uBAaA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,QAAA,EAAA,MAAA,CAAA;AAFA,iBAAA,CAbA;;AAAA;AAaA,gBAAA,WAbA;AAiBA,gBAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AAEA,gBAAA,MAAA,CAAA,SAAA,CAAA,YAAA;AACA,kBAAA,MAAA,CAAA,WAAA,GAAA,WAAA;AACA,kBAAA,MAAA,CAAA,IAAA,CAAA,SAAA,IAAA,WAAA;AACA,iBAHA;;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA,KAxBA;AAyBA,IAAA,SAzBA,qBAyBA,EAzBA,EAyBA;AACA,MAAA,MAAA,CAAA,QAAA,CAAA;AAAA,QAAA,GAAA,EAAA,CAAA;AAAA,QAAA,QAAA,EAAA;AAAA,OAAA;AACA,UAAA,SAAA,GAAA,KAAA,OAAA,CAAA,QAAA,GAAA,GAAA,GAAA,GAAA;AACA,MAAA,UAAA,CAAA,EAAA,EAAA,SAAA,CAAA;AACA;AA7BA;AAtCA,CAAA","sourcesContent":["<template>\n  <div id=\"inspiration\">\n    <Transition name=\"fade-transform\" mode=\"out-in\">\n      <div class=\"page\" v-if=\"inspiration.length\">\n        <Quote :quote=\"$config.inspirationOpts.qoute\" />\n        <div class=\"content\">\n          <Segment v-for=\"(item, i) in inspiration\" :key=\"item.number\" :title=\"item.date\" :color=\"colors[i]\">\n            <MarkDown :content=\"item.body\" />\n          </Segment>\n        </div>\n        <div class=\"btn-group\" v-if=\"!isDisabledPrev || !isDisabledNext\">\n          <Pagination\n            :loading=\"loading\"\n            :isDisabledPrev=\"isDisabledPrev\"\n            :isDisabledNext=\"isDisabledNext\"\n            @handlePage=\"queryInspiration\"\n          />\n        </div>\n      </div>\n      <Loading v-else />\n    </Transition>\n\n    <Comment v-if=\"$config.inspirationOpts.enableComment && initComment\" title=\"灵感\" />\n  </div>\n</template>\n\n<script>\nimport MarkDown from '@/components/MarkDown'\nimport Loading from '@/components/Loading'\nimport Pagination from '@/components/Pagination'\nimport Quote from '@/components/Quote'\nimport Segment from '@/components/Segment'\nimport Comment from '@/components/Comment'\nimport { shuffle } from '@/utils'\n\nexport default {\n  name: 'Inspiration',\n  components: {\n    MarkDown,\n    Loading,\n    Pagination,\n    Quote,\n    Segment,\n    Comment,\n  },\n  data() {\n    return {\n      loading: false,\n      initComment: false,\n      colors: shuffle(this.$config.themeColors),\n      totalCount: 0,\n      page: 0,\n      pageSize: 10,\n      inspiration: [],\n      list: [],\n    }\n  },\n  computed: {\n    maxPage() {\n      return Math.ceil(this.totalCount / this.pageSize)\n    },\n    isDisabledPrev() {\n      return this.page <= 1\n    },\n    isDisabledNext() {\n      return this.page >= this.maxPage\n    },\n  },\n  async created() {\n    this.totalCount = await this.$store.dispatch('queryInspirationCount')\n    await this.queryInspiration()\n    this.initComment = true\n  },\n  methods: {\n    async queryInspiration(type = 'next') {\n      if (this.loading) return\n      const queryPage = type === 'prev' ? this.page - 1 : this.page + 1\n      this.page = queryPage\n\n      if (this.list[queryPage]) {\n        this.scrollTop(() => {\n          this.inspiration = this.list[queryPage]\n        })\n        return\n      }\n\n      this.loading = true\n      const inspiration = await this.$store.dispatch('queryInspiration', {\n        page: queryPage,\n        pageSize: this.pageSize,\n      })\n      this.loading = false\n\n      this.scrollTop(() => {\n        this.inspiration = inspiration\n        this.list[queryPage] = inspiration\n      })\n    },\n    scrollTop(cb) {\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n      const delayTime = this.$config.isMobile ? 800 : 600\n      setTimeout(cb, delayTime)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"],"sourceRoot":"src/views/Inspiration"}]}