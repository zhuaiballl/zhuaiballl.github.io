{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/components/Cover/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/components/Cover/index.vue","mtime":1626163653604},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZpbGVDRE4gfSBmcm9tICdAL3V0aWxzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb3ZlcicsCiAgcHJvcHM6IHsKICAgIHNyYzogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgfSwKICAgIGFsdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgfSwKICAgIGxvYWRDb3ZlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdENvdmVyOiB0aGlzLiRjb25maWcuZGVmYXVsdENvdmVyLAogICAgICBpbWdTcmM6ICcnLAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBsb2FkQ292ZXI6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMubG9hZEltZygpCiAgICAgICAgfQogICAgICB9LAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRJbWcoKSB7CiAgICAgIGNvbnN0IGNkblVybCA9IGZpbGVDRE4odGhpcy5zcmMpCgogICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKQogICAgICBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSAoKSA9PiB7CiAgICAgICAgdGhpcy5pbWdTcmMgPSBjZG5VcmwKICAgICAgICB0aGlzLiRlbWl0KCdsb2FkTmV4dCcpCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gKHRoaXMudmlzaWJsZSA9IHRydWUpKQogICAgICB9CiAgICAgIGltZy5zcmMgPSBjZG5VcmwKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Cover","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img :src=\"defaultCover\" alt=\"defaultCover\" />\n    <img :class=\"['cover', visible && 'fadeIn']\" :src=\"imgSrc\" />\n  </div>\n</template>\n\n<script>\nimport { fileCDN } from '@/utils'\n\nexport default {\n  name: 'Cover',\n  props: {\n    src: {\n      type: String,\n      default: '',\n    },\n    alt: {\n      type: String,\n      default: '',\n    },\n    loadCover: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      defaultCover: this.$config.defaultCover,\n      imgSrc: '',\n      visible: false,\n    }\n  },\n  watch: {\n    loadCover: {\n      immediate: true,\n      handler(val) {\n        if (val) {\n          this.loadImg()\n        }\n      },\n    },\n  },\n  methods: {\n    loadImg() {\n      const cdnUrl = fileCDN(this.src)\n\n      const img = new Image()\n      img.onload = img.onerror = () => {\n        this.imgSrc = cdnUrl\n        this.$emit('loadNext')\n        this.$nextTick(() => (this.visible = true))\n      }\n      img.src = cdnUrl\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  position: relative;\n\n  .cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    opacity: 0;\n  }\n\n  .fadeIn {\n    animation: coverIn 0.8s ease-out forwards;\n  }\n}\n</style>\n"]}]}