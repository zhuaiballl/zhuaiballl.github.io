{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/components/ScrollTop/index.vue?vue&type=style&index=0&id=9dba506a&lang=scss&scoped=true&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/components/ScrollTop/index.vue","mtime":1626163653607},{"path":"/Users/guohechuan/code/aurora/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCkBpbXBvcnQgJy4vaW5kZXguc2Nzcyc7Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA","file":"index.vue","sourceRoot":"src/components/ScrollTop","sourcesContent":["<template>\n  <div class=\"wrapper\" :style=\"backTopStyle\">\n    <div v-if=\"!$isMobile.value\" @click=\"scrollTop\" :class=\"['back-to-top', 'cursor']\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ScrollTop',\n  data() {\n    return {\n      showBackTop: false,\n      topDistance: -950,\n      clientHeight: 0,\n      lastScrollTimer: '',\n      lastScrollAt: new Date(),\n    }\n  },\n  computed: {\n    backTopStyle() {\n      return { transform: `translateY(${this.topDistance}px)` }\n    },\n  },\n  mounted() {\n    if (!this.$isMobile.value) {\n      window.addEventListener('scroll', this.handleScroll)\n    }\n  },\n  methods: {\n    // 滚动到顶部\n    scrollTop() {\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n    },\n    // 监听页面滚动\n    handleScroll() {\n      const now = new Date()\n      if (now - this.lastScrollAt <= 150) return\n      this.lastScrollAt = now\n      this.handleTop()\n\n      clearTimeout(this.lastScrollTimer)\n      this.lastScrollTimer = setTimeout(this.handleTop, 300)\n    },\n    // 处理滚动事件\n    handleTop() {\n      // 更新顶部进度条\n      const clientHeight = document.documentElement.clientHeight\n      const scrollRange = document.body.clientHeight - clientHeight - 50\n      const pageYOffset = window.pageYOffset\n      this.$Progress.set((pageYOffset / scrollRange) * 100)\n\n      // 判断位置，控制滚动到顶部\n      const showBackTop = pageYOffset >= 200\n      if (showBackTop !== this.showBackTop || this.clientHeight !== clientHeight) {\n        this.topDistance = -950 + (showBackTop ? clientHeight : 0)\n        this.clientHeight = clientHeight\n        this.showBackTop = showBackTop\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"]}]}