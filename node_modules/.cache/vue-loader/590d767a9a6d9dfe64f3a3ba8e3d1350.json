{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/components/Panel/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/components/Panel/index.vue","mtime":1626163653607},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IFRoZW1lIGZyb20gJy4vY29tcG9uZW50cy9UaGVtZScKaW1wb3J0IFFyY29kZSBmcm9tICcuL2NvbXBvbmVudHMvUXJjb2RlJwppbXBvcnQgeyBsb2NhbFNhdmUsIGxvY2FsUmVhZCB9IGZyb20gJ0AvdXRpbHMnCmltcG9ydCBpbWFnZXMgZnJvbSAnQC9hc3NldHMvaW1hZ2VzJwoKY29uc3QgeyBiZyB9ID0gaW1hZ2VzCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1BhbmVsJywKICBjb21wb25lbnRzOiB7IFRoZW1lLCBRcmNvZGUgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGhlbWU6ICcnLAogICAgICBsaWtlVGltZXM6IDAsCiAgICAgIGlzTGlrZVNpdGU6IGxvY2FsUmVhZCgnaXNMaWtlU2l0ZScsIGZhbHNlKSwKICAgICAgY3VycmVudElueDogMSwKICAgICAgbG9ja1N3aXBlcjogZmFsc2UsCiAgICAgIHpvb21TcmM6ICcnLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgc2hvd1BhbmVsOiAoc3RhdGUpID0+IHN0YXRlLnNob3dQYW5lbCwKICAgIH0pLAogICAgcGFuZWxUaXRsZSgpIHsKICAgICAgY29uc3QgaW54ID0gKHRoaXMuY3VycmVudElueCArIDEpICUgMgogICAgICByZXR1cm4gWyfog4zmma/kuLvpopgnLCAn6LWb6ZKx566xJ11baW54XQogICAgfSwKICAgIGRpc3RhbmNlKCkgewogICAgICByZXR1cm4gWzAsIC02MDAsIC0xMjAwLCAtMTgwMF1bdGhpcy5jdXJyZW50SW54XQogICAgfSwKICAgIGNvbnRhaW5lclN0eWxlKCkgewogICAgICByZXR1cm4geyB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgke3RoaXMuZGlzdGFuY2V9cHgsIDAsIDApYCB9CiAgICB9LAogICAgbGlrZUJ0blRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTGlrZVNpdGUgPyAi6LCi6LCi54K56LWeICjil48n4pehJ+KXjykiIDogJ+eCuei1nuS4gOS4iyAoPOOCnc+J44O7KeKYhicKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgJyRpc01vYmlsZS52YWx1ZSc6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh2YWwpIHJldHVybgogICAgICAgIHRoaXMuaW5pdFRoZW1lKCkKICAgICAgfSwKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5xdWVyeUxpa2UoKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g54K56LWe5pWwCiAgICBhc3luYyBxdWVyeUxpa2UoKSB7CiAgICAgIHRoaXMubGlrZVRpbWVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5TGlrZScsICdnZXRUaW1lcycpCiAgICB9LAogICAgLy8g54K56LWeCiAgICBhc3luYyBsaWtlU2l0ZSgpIHsKICAgICAgaWYgKHRoaXMuaXNMaWtlU2l0ZSkgcmV0dXJuCiAgICAgIHRoaXMubGlrZVRpbWVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5TGlrZScpCiAgICAgIHRoaXMuaXNMaWtlU2l0ZSA9IHRydWUKICAgICAgbG9jYWxTYXZlKCdpc0xpa2VTaXRlJywgdHJ1ZSkKICAgIH0sCiAgICAvLyDliJ3lp4vljJbog4zmma/kuLvpopgKICAgIGluaXRUaGVtZSgpIHsKICAgICAgaWYgKHRoaXMudGhlbWUpIHJldHVybgogICAgICBjb25zdCB0aGVtZSA9IGxvY2FsUmVhZCgndGhlbWUnLCAndG91aG91JykKICAgICAgdGhpcy5zZXRUaGVtZSh0aGVtZSkKICAgIH0sCiAgICAvLyDliIfmjaLkuLvpopgKICAgIHN3aXRjaFRoZW1lKHRoZW1lKSB7CiAgICAgIGlmICh0aGVtZSA9PT0gdGhpcy50aGVtZSkgcmV0dXJuCiAgICAgIHRoaXMuc2V0VGhlbWUodGhlbWUpCiAgICB9LAogICAgLy8g6K6+572u5Li76aKYCiAgICBzZXRUaGVtZSh0aGVtZSkgewogICAgICB0aGlzLnRoZW1lID0gdGhlbWUKICAgICAgbG9jYWxTYXZlKCd0aGVtZScsIHRoZW1lKQogICAgICB3aW5kb3cuJCgnI2JnJykuYmFja3N0cmV0Y2goYmdbdGhlbWVdLCB7CiAgICAgICAgZHVyYXRpb246IDEwMDAwLAogICAgICAgIGFsaWduWTogMCwKICAgICAgICB0cmFuc2l0aW9uOiAnZmFkZScsCiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAxMDAwLAogICAgICB9KQogICAgfSwKICAgIC8vIOWFs+mXremdouadvwogICAgaGlkZVBhbmVsKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFNob3dQYW5lbCcsIGZhbHNlKQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5jdXJyZW50SW54ID0gMQogICAgICB9KQogICAgfSwKICAgIC8vIOa7keWKqOmdouadvwogICAgc3dpcGVyVG8oZGlyZWN0aW9uKSB7CiAgICAgIGlmICh0aGlzLmxvY2tTd2lwZXIpIHJldHVybgogICAgICB0aGlzLmxvY2tTd2lwZXIgPSB0cnVlCiAgICAgIGNvbnN0IHN3aXBlciA9IHRoaXMuJHJlZnMuc3dpcGVyCiAgICAgIHN3aXBlci5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJykKCiAgICAgIHRoaXMuY3VycmVudElueCArPSBkaXJlY3Rpb24KICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2NrU3dpcGVyID0gZmFsc2UKICAgICAgICBpZiAodGhpcy5jdXJyZW50SW54ID09PSAwKSB7CiAgICAgICAgICBzd2lwZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZScpCiAgICAgICAgICB0aGlzLmN1cnJlbnRJbnggPSAyCiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbnggPT09IDMpIHsKICAgICAgICAgIHN3aXBlci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJykKICAgICAgICAgIHRoaXMuY3VycmVudElueCA9IDEKICAgICAgICB9CiAgICAgIH0sIDUwMCkKICAgIH0sCiAgICAvLyDorr7nva7nvKnmlL7kuoznu7TnoIEKICAgIHNldFpvb21TcmMoc3JjID0gJycpIHsKICAgICAgdGhpcy56b29tU3JjID0gc3JjCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Panel","sourcesContent":["<template>\n  <div id=\"panel\" v-show=\"showPanel\">\n    <div class=\"mask\" @click=\"hidePanel\"></div>\n    <div class=\"container\">\n      <div class=\"wrapper\">\n        <div class=\"short-line\">\n          <div></div>\n          <div></div>\n        </div>\n        <div class=\"main\">\n          <div class=\"header\">\n            <div class=\"inner\">{{ panelTitle }}</div>\n          </div>\n          <div class=\"body\" v-if=\"showPanel\">\n            <div class=\"swiper-wrapper\">\n              <ul ref=\"swiper\" id=\"swiper\" class=\"swiper animate\" :style=\"containerStyle\">\n                <li>\n                  <Qrcode @zoom=\"setZoomSrc\" />\n                </li>\n                <li>\n                  <Theme :theme=\"theme\" @switchTheme=\"switchTheme\" />\n                </li>\n                <li>\n                  <Qrcode @zoom=\"setZoomSrc\" />\n                </li>\n                <li>\n                  <Theme :theme=\"theme\" @switchTheme=\"switchTheme\" />\n                </li>\n              </ul>\n            </div>\n            <button class=\"cursor btn left-btn\" @click=\"swiperTo(-1)\">\n              <i class=\"icon icon-left-open-outline\"></i>\n            </button>\n            <button class=\"cursor btn right-btn\" @click=\"swiperTo(1)\">\n              <i class=\"icon icon-right-open-outline\"></i>\n            </button>\n            <div class=\"like\">\n              <p>\n                已有\n                <span>{{ likeTimes }}</span> 人点赞了哦！\n              </p>\n            </div>\n          </div>\n          <div class=\"footer\">\n            <div class=\"cursor\" :data-title=\"likeBtnText\" @click=\"likeSite\"></div>\n          </div>\n        </div>\n        <div class=\"long-line\">\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"!!zoomSrc\" class=\"zoom\" @click=\"setZoomSrc()\">\n      <img class=\"cursor\" :src=\"zoomSrc\" alt />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport Theme from './components/Theme'\nimport Qrcode from './components/Qrcode'\nimport { localSave, localRead } from '@/utils'\nimport images from '@/assets/images'\n\nconst { bg } = images\n\nexport default {\n  name: 'Panel',\n  components: { Theme, Qrcode },\n  data() {\n    return {\n      theme: '',\n      likeTimes: 0,\n      isLikeSite: localRead('isLikeSite', false),\n      currentInx: 1,\n      lockSwiper: false,\n      zoomSrc: '',\n    }\n  },\n  computed: {\n    ...mapState({\n      showPanel: (state) => state.showPanel,\n    }),\n    panelTitle() {\n      const inx = (this.currentInx + 1) % 2\n      return ['背景主题', '赛钱箱'][inx]\n    },\n    distance() {\n      return [0, -600, -1200, -1800][this.currentInx]\n    },\n    containerStyle() {\n      return { transform: `translate3d(${this.distance}px, 0, 0)` }\n    },\n    likeBtnText() {\n      return this.isLikeSite ? \"谢谢点赞 (●'◡'●)\" : '点赞一下 (<ゝω・)☆'\n    },\n  },\n  watch: {\n    '$isMobile.value': {\n      immediate: true,\n      handler(val) {\n        if (val) return\n        this.initTheme()\n      },\n    },\n  },\n  mounted() {\n    this.queryLike()\n  },\n  methods: {\n    // 点赞数\n    async queryLike() {\n      this.likeTimes = await this.$store.dispatch('queryLike', 'getTimes')\n    },\n    // 点赞\n    async likeSite() {\n      if (this.isLikeSite) return\n      this.likeTimes = await this.$store.dispatch('queryLike')\n      this.isLikeSite = true\n      localSave('isLikeSite', true)\n    },\n    // 初始化背景主题\n    initTheme() {\n      if (this.theme) return\n      const theme = localRead('theme', 'touhou')\n      this.setTheme(theme)\n    },\n    // 切换主题\n    switchTheme(theme) {\n      if (theme === this.theme) return\n      this.setTheme(theme)\n    },\n    // 设置主题\n    setTheme(theme) {\n      this.theme = theme\n      localSave('theme', theme)\n      window.$('#bg').backstretch(bg[theme], {\n        duration: 10000,\n        alignY: 0,\n        transition: 'fade',\n        transitionDuration: 1000,\n      })\n    },\n    // 关闭面板\n    hidePanel() {\n      this.$store.commit('setShowPanel', false)\n      this.$nextTick(() => {\n        this.currentInx = 1\n      })\n    },\n    // 滑动面板\n    swiperTo(direction) {\n      if (this.lockSwiper) return\n      this.lockSwiper = true\n      const swiper = this.$refs.swiper\n      swiper.classList.add('animate')\n\n      this.currentInx += direction\n      setTimeout(() => {\n        this.lockSwiper = false\n        if (this.currentInx === 0) {\n          swiper.classList.remove('animate')\n          this.currentInx = 2\n        }\n        if (this.currentInx === 3) {\n          swiper.classList.remove('animate')\n          this.currentInx = 1\n        }\n      }, 500)\n    },\n    // 设置缩放二维码\n    setZoomSrc(src = '') {\n      this.zoomSrc = src\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"]}]}