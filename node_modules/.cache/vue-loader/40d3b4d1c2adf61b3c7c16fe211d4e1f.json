{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/components/ScrollTop/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/components/ScrollTop/index.vue","mtime":1626163653607},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2Nyb2xsVG9wJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0JhY2tUb3A6IGZhbHNlLAogICAgICB0b3BEaXN0YW5jZTogLTk1MCwKICAgICAgY2xpZW50SGVpZ2h0OiAwLAogICAgICBsYXN0U2Nyb2xsVGltZXI6ICcnLAogICAgICBsYXN0U2Nyb2xsQXQ6IG5ldyBEYXRlKCksCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgYmFja1RvcFN0eWxlKCkgewogICAgICByZXR1cm4geyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7dGhpcy50b3BEaXN0YW5jZX1weClgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKCF0aGlzLiRpc01vYmlsZS52YWx1ZSkgewogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5oYW5kbGVTY3JvbGwpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmu5rliqjliLDpobbpg6gKICAgIHNjcm9sbFRvcCgpIHsKICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiAwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSkKICAgIH0sCiAgICAvLyDnm5HlkKzpobXpnaLmu5rliqgKICAgIGhhbmRsZVNjcm9sbCgpIHsKICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKQogICAgICBpZiAobm93IC0gdGhpcy5sYXN0U2Nyb2xsQXQgPD0gMTUwKSByZXR1cm4KICAgICAgdGhpcy5sYXN0U2Nyb2xsQXQgPSBub3cKICAgICAgdGhpcy5oYW5kbGVUb3AoKQoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubGFzdFNjcm9sbFRpbWVyKQogICAgICB0aGlzLmxhc3RTY3JvbGxUaW1lciA9IHNldFRpbWVvdXQodGhpcy5oYW5kbGVUb3AsIDMwMCkKICAgIH0sCiAgICAvLyDlpITnkIbmu5rliqjkuovku7YKICAgIGhhbmRsZVRvcCgpIHsKICAgICAgLy8g5pu05paw6aG26YOo6L+b5bqm5p2hCiAgICAgIGNvbnN0IGNsaWVudEhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQKICAgICAgY29uc3Qgc2Nyb2xsUmFuZ2UgPSBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCAtIGNsaWVudEhlaWdodCAtIDUwCiAgICAgIGNvbnN0IHBhZ2VZT2Zmc2V0ID0gd2luZG93LnBhZ2VZT2Zmc2V0CiAgICAgIHRoaXMuJFByb2dyZXNzLnNldCgocGFnZVlPZmZzZXQgLyBzY3JvbGxSYW5nZSkgKiAxMDApCgogICAgICAvLyDliKTmlq3kvY3nva7vvIzmjqfliLbmu5rliqjliLDpobbpg6gKICAgICAgY29uc3Qgc2hvd0JhY2tUb3AgPSBwYWdlWU9mZnNldCA+PSAyMDAKICAgICAgaWYgKHNob3dCYWNrVG9wICE9PSB0aGlzLnNob3dCYWNrVG9wIHx8IHRoaXMuY2xpZW50SGVpZ2h0ICE9PSBjbGllbnRIZWlnaHQpIHsKICAgICAgICB0aGlzLnRvcERpc3RhbmNlID0gLTk1MCArIChzaG93QmFja1RvcCA/IGNsaWVudEhlaWdodCA6IDApCiAgICAgICAgdGhpcy5jbGllbnRIZWlnaHQgPSBjbGllbnRIZWlnaHQKICAgICAgICB0aGlzLnNob3dCYWNrVG9wID0gc2hvd0JhY2tUb3AKICAgICAgfQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/ScrollTop","sourcesContent":["<template>\n  <div class=\"wrapper\" :style=\"backTopStyle\">\n    <div v-if=\"!$isMobile.value\" @click=\"scrollTop\" :class=\"['back-to-top', 'cursor']\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ScrollTop',\n  data() {\n    return {\n      showBackTop: false,\n      topDistance: -950,\n      clientHeight: 0,\n      lastScrollTimer: '',\n      lastScrollAt: new Date(),\n    }\n  },\n  computed: {\n    backTopStyle() {\n      return { transform: `translateY(${this.topDistance}px)` }\n    },\n  },\n  mounted() {\n    if (!this.$isMobile.value) {\n      window.addEventListener('scroll', this.handleScroll)\n    }\n  },\n  methods: {\n    // 滚动到顶部\n    scrollTop() {\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n    },\n    // 监听页面滚动\n    handleScroll() {\n      const now = new Date()\n      if (now - this.lastScrollAt <= 150) return\n      this.lastScrollAt = now\n      this.handleTop()\n\n      clearTimeout(this.lastScrollTimer)\n      this.lastScrollTimer = setTimeout(this.handleTop, 300)\n    },\n    // 处理滚动事件\n    handleTop() {\n      // 更新顶部进度条\n      const clientHeight = document.documentElement.clientHeight\n      const scrollRange = document.body.clientHeight - clientHeight - 50\n      const pageYOffset = window.pageYOffset\n      this.$Progress.set((pageYOffset / scrollRange) * 100)\n\n      // 判断位置，控制滚动到顶部\n      const showBackTop = pageYOffset >= 200\n      if (showBackTop !== this.showBackTop || this.clientHeight !== clientHeight) {\n        this.topDistance = -950 + (showBackTop ? clientHeight : 0)\n        this.clientHeight = clientHeight\n        this.showBackTop = showBackTop\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import './index.scss';\n</style>\n"]}]}