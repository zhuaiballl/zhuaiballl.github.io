{"remainingRequest":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/guohechuan/code/aurora/src/App.vue?vue&type=style&index=0&lang=scss&scope=true&","dependencies":[{"path":"/Users/guohechuan/code/aurora/src/App.vue","mtime":1626163653600},{"path":"/Users/guohechuan/code/aurora/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/guohechuan/code/aurora/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2FwcCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIEBpbmNsdWRlIHBjLWxheW91dCB7CiAgICBwYWRkaW5nLWJvdHRvbTogMTAwcHg7CiAgfQogIEBpbmNsdWRlIHNwLWxheW91dCB7CiAgICBwYWRkaW5nLWJvdHRvbTogNjBweDsKICB9CgogIC5tYWluIHsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgbWF4LXdpZHRoOiAkcGFnZS1kZXNrdG9wOwogICAgdXNlci1zZWxlY3Q6IHRleHQ7CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <vue-progress-bar />\n    <Transition name=\"header-transform\" mode=\"out-in\">\n      <Header v-show=\"showHeader\" />\n    </Transition>\n    <main class=\"main\">\n      <Transition name=\"fade-transform\" mode=\"out-in\">\n        <keep-alive :exclude=\"['Post']\" :max=\"10\">\n          <RouterView />\n        </keep-alive>\n      </Transition>\n    </main>\n    <Footer />\n    <Panel />\n    <ScrollTop />\n  </div>\n</template>\n\n<script>\nimport Header from '@/components/Header'\nimport Footer from '@/components/Footer'\nimport Panel from '@/components/Panel'\nimport ScrollTop from '@/components/ScrollTop'\nimport { getLocation, isMobile } from '@/utils'\n\nexport default {\n  name: 'App',\n  components: {\n    Header,\n    Footer,\n    Panel,\n    ScrollTop,\n  },\n  data() {\n    return {\n      showHeader: true,\n      lastResizeTimer: '',\n      lastResizeAt: new Date(),\n    }\n  },\n  watch: {\n    $route: {\n      immediate: true,\n      handler(val) {\n        if (this.$isMobile.value) {\n          this.showHeader = val.name !== 'post'\n        }\n        if (val.name === 'post') {\n          setTimeout(this.scrollTop, 500)\n        }\n      },\n    },\n    '$isMobile.value': {\n      immediate: true,\n      handler(val) {\n        if (val) {\n          this.showHeader = this.$route && this.$route.name !== 'post'\n        } else {\n          this.showHeader = true\n        }\n      },\n    },\n  },\n  created() {\n    this.initProgress()\n    this.visitorStatistics()\n  },\n  mounted() {\n    this.$Progress.finish()\n    window.addEventListener('resize', this.handleResize)\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.handleResize)\n  },\n  methods: {\n    // 窗口监听\n    handleResize() {\n      const now = new Date()\n      if (now - this.lastResizeAt <= 150) return\n      this.lastResizeAt = now\n      this.$isMobile.value = isMobile()\n\n      clearTimeout(this.lastResizeTimer)\n      this.lastResizeTimer = setTimeout(() => {\n        this.$isMobile.value = isMobile()\n      }, 300)\n    },\n    // 注册顶部进度条\n    initProgress() {\n      this.$Progress.start()\n      this.$router.beforeEach((to, from, next) => {\n        this.$Progress.start()\n        next()\n      })\n      this.$router.afterEach(() => {\n        this.$Progress.finish()\n      })\n    },\n    // 统计访客来源\n    visitorStatistics() {\n      const referrer = getLocation(document.referrer)\n      const hostname = referrer.hostname || '直接访问'\n      this.$store.dispatch('visitorStatistics', hostname)\n    },\n    // 滚动到顶部\n    scrollTop() {\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scope>\n#app {\n  position: relative;\n  @include pc-layout {\n    padding-bottom: 100px;\n  }\n  @include sp-layout {\n    padding-bottom: 60px;\n  }\n\n  .main {\n    margin: 0 auto;\n    max-width: $page-desktop;\n    user-select: text;\n  }\n}\n</style>\n"]}]}